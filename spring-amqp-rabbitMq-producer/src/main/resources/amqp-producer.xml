<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/rabbit"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit-1.0.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- RabbitMQ 连接工厂 -->
    <connection-factory id="connectionFactory"
                        host="${rabbitmq.host}"
                        port="${rabbitmq.port}"
                        username="${rabbitmq.username}"
                        password="${rabbitmq.password}"/>

    <!-- 该元素回创建一个 RabbitMQ 管理组件，用于自动创建以下元素所声明的 queue、exchange、binding -->
    <admin connection-factory="connectionFactory"/>

    <!-- 这里举例没有声明exchange，使用默认的 direct 类型 exchange。所有的queue都绑定再这个exchange上，
    并且routing key 与 queue 名称一致 -->
    <queue id="spittleAlertQueue" name="spittle.alerts" />

    <!-- **********RabbitMQ 管理主键创建 start********* -->
    <!-- 声明队列 -->
    <!--<queue name="spittle.alert.queue.1" />

    <queue name="spittle.alert.queue.2" />

    <queue name="spittle.alert.queue.3" />-->

    <!-- fanout 类型的exchange，不管消息的routing key 和参数表的头信息/值是什么，消息将会路由到所有队列上 -->
    <!--<fanout-exchange name="spittle.fanout" >
        <bindings>
            <binding queue="spittle.alert.queue.1" />

            <binding queue="spittle.alert.queue.2" />

            <binding queue="spittle.alert.queue.3" />
        </bindings>
    </fanout-exchange>-->
    <!-- **********RabbitMQ 管理主键创建 end********* -->

    <template id="rabbitTemplate" connection-factory="connectionFactory"
              exchange="spittle.alert.exchange"
              routing-key="spittle.alerts"/>
</beans:beans>